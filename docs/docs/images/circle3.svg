<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960" font-family="'Segoe UI', system-ui, sans-serif">
  <defs>
    <linearGradient id="kelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#2dd4bf" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#2dd4bf" stop-opacity="0.05"/>
    </linearGradient>
    <linearGradient id="seqGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#f59e0b" stop-opacity="0.05"/>
    </linearGradient>
    <!-- indigo arrow for global sequence -->
    <marker id="arrow" viewBox="0 0 10 7" refX="10" refY="3.5"
            markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
    </marker>
    <!-- rose arrow for key rotation chains -->
    <marker id="rotArrow" viewBox="0 0 10 7" refX="10" refY="3.5"
            markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f43f5e"/>
    </marker>
  </defs>

  <rect width="960" height="960" fill="#1e1e2e" rx="16"/>

  <text x="480" y="45" text-anchor="middle" fill="#cdd6f4"
        font-size="22" font-weight="600">Kel-Circle Protocol</text>
  <text x="480" y="70" text-anchor="middle" fill="#6c7086"
        font-size="13">5 members + 1 sequencer · global sequence</text>

  <!-- Subtle circle outline, center=(480,490), r=310 -->
  <circle cx="480" cy="490" r="310" fill="none"
          stroke="#313244" stroke-width="1" stroke-dasharray="4,8" opacity="0.4"/>

  <!-- ============================================================ -->
  <!-- 6 KELs on the circle, 60° apart.                             -->
  <!-- icp at outer end, last event closest to center.               -->
  <!--                                                               -->
  <!-- Event colors:                                                 -->
  <!--   icp = teal    (#2dd4bf / #94e2d5)                           -->
  <!--   rot = rose    (#f43f5e / #fda4af)                           -->
  <!--   ixn = indigo  (#6366f1 / #a5b4fc)                           -->
  <!--                                                               -->
  <!-- Positions (angle from top, clockwise):                        -->
  <!--   S:  0°  (480, 180)  rot=180°  — Sequencer (amber)          -->
  <!--   A: 60°  (748, 335)  rot=240°  — has 1 rot                  -->
  <!--   B: 120° (748, 645)  rot=300°                                -->
  <!--   C: 180° (480, 800)  rot=0°    — has 1 rot                  -->
  <!--   D: 240° (212, 645)  rot=60°                                 -->
  <!--   E: 300° (212, 335)  rot=120°  — has 2 rots                 -->
  <!-- ============================================================ -->

  <!-- ===== Sequencer S (0°, top) — amber, rotated 180° ===== -->
  <g transform="translate(480,180) rotate(180)">
    <rect x="-32" y="-95" width="64" height="190" rx="10"
          fill="url(#seqGrad)" stroke="#f59e0b" stroke-width="1.5"/>
    <!-- icp -->
    <rect x="-24" y="-85" width="48" height="26" rx="4"
          fill="#f59e0b" fill-opacity="0.25"/>
    <text x="0" y="-67" text-anchor="middle" fill="#fcd34d"
          font-size="10" transform="rotate(180,0,-72)">icp</text>
    <!-- global seq slots -->
    <rect x="-24" y="-53" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-35" text-anchor="middle" fill="#a5b4fc"
          font-size="9" transform="rotate(180,0,-40)">ixn 0→1</text>
    <rect x="-24" y="-21" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-3" text-anchor="middle" fill="#a5b4fc"
          font-size="9" transform="rotate(180,0,-8)">ixn 0→2</text>
    <rect x="-24" y="11" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="29" text-anchor="middle" fill="#a5b4fc"
          font-size="9" transform="rotate(180,0,24)">ixn 0→3</text>
    <rect x="-24" y="43" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.15"/>
    <text x="0" y="61" text-anchor="middle" fill="#7c7f9b"
          font-size="9" transform="rotate(180,0,56)">...</text>
    <!-- label -->
    <text x="0" y="85" text-anchor="middle" fill="#f59e0b"
          font-size="11" font-weight="700"
          transform="rotate(180,0,80)">S</text>
  </g>

  <!-- ===== Member A (60°, top-right) — has 1 rot ===== -->
  <!-- Events: icp, ixn1, rot, ixn4, ixn7 — 5 slots -->
  <g transform="translate(748,335) rotate(240)">
    <rect x="-32" y="-111" width="64" height="222" rx="10"
          fill="url(#kelGrad)" stroke="#2dd4bf" stroke-width="1.5"/>
    <!-- icp -->
    <rect x="-24" y="-101" width="48" height="26" rx="4"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="0" y="-83" text-anchor="middle" fill="#94e2d5"
          font-size="10" transform="rotate(120,0,-88)">icp</text>
    <!-- ixn 1 -->
    <rect x="-24" y="-69" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-51" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(120,0,-56)">ixn 1</text>
    <!-- rot -->
    <rect x="-24" y="-37" width="48" height="26" rx="4"
          fill="#f43f5e" fill-opacity="0.3"/>
    <text x="0" y="-19" text-anchor="middle" fill="#fda4af"
          font-size="10" transform="rotate(120,0,-24)">rot</text>
    <!-- ixn 4 -->
    <rect x="-24" y="-5" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="13" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(120,0,8)">ixn 4</text>
    <!-- ixn 7 -->
    <rect x="-24" y="27" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="45" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(120,0,40)">ixn 7</text>
    <!-- label -->
    <text x="0" y="76" text-anchor="middle" fill="#2dd4bf"
          font-size="11" font-weight="600"
          transform="rotate(120,0,71)">A</text>
  </g>

  <!-- ===== Member B (120°, bottom-right) — no rot ===== -->
  <g transform="translate(748,645) rotate(300)">
    <rect x="-32" y="-75" width="64" height="150" rx="10"
          fill="url(#kelGrad)" stroke="#2dd4bf" stroke-width="1.5"/>
    <rect x="-24" y="-65" width="48" height="26" rx="4"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="0" y="-47" text-anchor="middle" fill="#94e2d5"
          font-size="10" transform="rotate(60,0,-52)">icp</text>
    <rect x="-24" y="-33" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-15" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(60,0,-20)">ixn 2</text>
    <rect x="-24" y="-1" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="17" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(60,0,12)">ixn 8</text>
    <text x="0" y="48" text-anchor="middle" fill="#2dd4bf"
          font-size="11" font-weight="600"
          transform="rotate(60,0,43)">B</text>
  </g>

  <!-- ===== Member C (180°, bottom) — has 1 rot ===== -->
  <g transform="translate(480,800) rotate(0)">
    <rect x="-32" y="-95" width="64" height="190" rx="10"
          fill="url(#kelGrad)" stroke="#2dd4bf" stroke-width="1.5"/>
    <rect x="-24" y="-85" width="48" height="26" rx="4"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="0" y="-67" text-anchor="middle" fill="#94e2d5"
          font-size="10">icp</text>
    <rect x="-24" y="-53" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-35" text-anchor="middle" fill="#a5b4fc"
          font-size="10">ixn 3</text>
    <!-- rot -->
    <rect x="-24" y="-21" width="48" height="26" rx="4"
          fill="#f43f5e" fill-opacity="0.3"/>
    <text x="0" y="-3" text-anchor="middle" fill="#fda4af"
          font-size="10">rot</text>
    <rect x="-24" y="11" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="29" text-anchor="middle" fill="#a5b4fc"
          font-size="10">ixn 6</text>
    <text x="0" y="60" text-anchor="middle" fill="#2dd4bf"
          font-size="11" font-weight="600">C</text>
  </g>

  <!-- ===== Member D (240°, bottom-left) — no rot ===== -->
  <g transform="translate(212,645) rotate(60)">
    <rect x="-32" y="-75" width="64" height="150" rx="10"
          fill="url(#kelGrad)" stroke="#2dd4bf" stroke-width="1.5"/>
    <rect x="-24" y="-65" width="48" height="26" rx="4"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="0" y="-47" text-anchor="middle" fill="#94e2d5"
          font-size="10" transform="rotate(-60,0,-52)">icp</text>
    <rect x="-24" y="-33" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-15" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(-60,0,-20)">ixn 5</text>
    <text x="0" y="20" text-anchor="middle" fill="#2dd4bf"
          font-size="11" font-weight="600"
          transform="rotate(-60,0,15)">D</text>
  </g>

  <!-- ===== Member E (300°, top-left) — has 2 rots ===== -->
  <!-- Events: icp, rot1, ixn9, rot2 — 4 slots -->
  <g transform="translate(212,335) rotate(120)">
    <rect x="-32" y="-95" width="64" height="190" rx="10"
          fill="url(#kelGrad)" stroke="#2dd4bf" stroke-width="1.5"/>
    <!-- icp -->
    <rect x="-24" y="-85" width="48" height="26" rx="4"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="0" y="-67" text-anchor="middle" fill="#94e2d5"
          font-size="10" transform="rotate(-120,0,-72)">icp</text>
    <!-- rot 1 -->
    <rect x="-24" y="-53" width="48" height="26" rx="4"
          fill="#f43f5e" fill-opacity="0.3"/>
    <text x="0" y="-35" text-anchor="middle" fill="#fda4af"
          font-size="10" transform="rotate(-120,0,-40)">rot</text>
    <!-- ixn 9 -->
    <rect x="-24" y="-21" width="48" height="26" rx="4"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="0" y="-3" text-anchor="middle" fill="#a5b4fc"
          font-size="10" transform="rotate(-120,0,-8)">ixn 9</text>
    <!-- rot 2 -->
    <rect x="-24" y="11" width="48" height="26" rx="4"
          fill="#f43f5e" fill-opacity="0.3"/>
    <text x="0" y="29" text-anchor="middle" fill="#fda4af"
          font-size="10" transform="rotate(-120,0,24)">rot</text>
    <!-- label -->
    <text x="0" y="60" text-anchor="middle" fill="#2dd4bf"
          font-size="11" font-weight="600"
          transform="rotate(-120,0,55)">E</text>
  </g>

  <!-- ============================================================ -->
  <!-- Global sequence: straight lines between ixn events            -->
  <!--                                                               -->
  <!-- Sequence order: 1→2→3→4→5→6→7→8→9                            -->
  <!--   1: A  2: B  3: C  4: A  5: D  6: C  7: A  8: B  9: E     -->
  <!--                                                               -->
  <!-- World coords of ixn centers (computed from transforms):       -->
  <!--   A: ixn1≈(720,350) ixn4≈(744,334) ixn7≈(758,318)           -->
  <!--   B: ixn2≈(731,635) ixn8≈(758,651)                           -->
  <!--   C: ixn3≈(480,747) ixn6≈(480,811)                           -->
  <!--   D: ixn5≈(229,635)                                          -->
  <!--   E: ixn9≈(229,343)                                          -->
  <!-- ============================================================ -->

  <!-- 1→2: A(ixn1) → B(ixn2) -->
  <line x1="720" y1="350" x2="731" y2="635"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 2→3: B(ixn2) → C(ixn3) -->
  <line x1="731" y1="635" x2="480" y2="747"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 3→4: C(ixn3) → A(ixn4) -->
  <line x1="480" y1="747" x2="744" y2="334"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 4→5: A(ixn4) → D(ixn5) -->
  <line x1="744" y1="334" x2="229" y2="635"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 5→6: D(ixn5) → C(ixn6) -->
  <line x1="229" y1="635" x2="480" y2="811"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 6→7: C(ixn6) → A(ixn7) -->
  <line x1="480" y1="811" x2="758" y2="318"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 7→8: A(ixn7) → B(ixn8) -->
  <line x1="758" y1="318" x2="758" y2="651"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>
  <!-- 8→9: B(ixn8) → E(ixn9) -->
  <line x1="758" y1="651" x2="229" y2="343"
        stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
        marker-end="url(#arrow)" opacity="0.5"/>

  <!-- Numbered sequence dots at each ixn event -->
  <g font-size="8" font-weight="700" text-anchor="middle" fill="#1e1e2e">
    <circle cx="720" cy="350" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="720" y="353">1</text>
    <circle cx="731" cy="635" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="731" y="638">2</text>
    <circle cx="480" cy="747" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="480" y="750">3</text>
    <circle cx="744" cy="334" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="744" y="337">4</text>
    <circle cx="229" cy="635" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="229" y="638">5</text>
    <circle cx="480" cy="811" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="480" y="814">6</text>
    <circle cx="758" cy="318" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="758" y="321">7</text>
    <circle cx="758" cy="651" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="758" y="654">8</text>
    <circle cx="229" cy="343" r="8" fill="#6366f1" opacity="0.8"/>
    <text x="229" y="346">9</text>
  </g>

  <!-- ============================================================ -->
  <!-- Key rotation chains: bezier curves icp→rot→rot within KELs   -->
  <!-- Rose colored, connecting the key lifecycle events             -->
  <!-- ============================================================ -->

  <!-- A: icp→rot (local icp center y=-88, rot center y=-24) -->
  <!-- World: icp≈(724,362) rot≈(736,340) — curve bows outward -->
  <path d="M 724,362 Q 780,350 736,340" fill="none"
        stroke="#f43f5e" stroke-width="1.3" stroke-dasharray="3,2"
        marker-end="url(#rotArrow)" opacity="0.6"/>

  <!-- C: icp→rot (local icp center y=-72, rot center y=-8) -->
  <!-- World: icp≈(480,728) rot≈(480,792) — curve bows right -->
  <path d="M 480,728 Q 520,760 480,792" fill="none"
        stroke="#f43f5e" stroke-width="1.3" stroke-dasharray="3,2"
        marker-end="url(#rotArrow)" opacity="0.6"/>

  <!-- E: icp→rot1 (local icp y=-72, rot1 y=-40) -->
  <!-- World: icp≈(225,347) rot1≈(227,341) — but these are close -->
  <!-- E: icp≈(229,347) rot1≈(224,339) rot2≈(217,327) — curve bows left -->
  <path d="M 229,347 Q 185,343 224,339" fill="none"
        stroke="#f43f5e" stroke-width="1.3" stroke-dasharray="3,2"
        marker-end="url(#rotArrow)" opacity="0.6"/>
  <!-- E: rot1→rot2 -->
  <path d="M 224,339 Q 180,333 217,327" fill="none"
        stroke="#f43f5e" stroke-width="1.3" stroke-dasharray="3,2"
        marker-end="url(#rotArrow)" opacity="0.6"/>

  <!-- ============================================================ -->
  <!-- Legend                                                         -->
  <!-- ============================================================ -->
  <g transform="translate(40,910)">
    <rect x="0" y="0" width="40" height="16" rx="3"
          fill="#2dd4bf" fill-opacity="0.3"/>
    <text x="20" y="12" text-anchor="middle" fill="#94e2d5"
          font-size="9">icp</text>
    <text x="48" y="12" fill="#a6adc8" font-size="10">inception</text>

    <rect x="130" y="0" width="40" height="16" rx="3"
          fill="#f43f5e" fill-opacity="0.3"/>
    <text x="150" y="12" text-anchor="middle" fill="#fda4af"
          font-size="9">rot</text>
    <text x="178" y="12" fill="#a6adc8" font-size="10">key rotation</text>

    <rect x="290" y="0" width="40" height="16" rx="3"
          fill="#6366f1" fill-opacity="0.3"/>
    <text x="310" y="12" text-anchor="middle" fill="#a5b4fc"
          font-size="9">ixn</text>
    <text x="338" y="12" fill="#a6adc8" font-size="10">interaction</text>

    <rect x="440" y="0" width="16" height="16" rx="3"
          fill="#f59e0b" fill-opacity="0.2" stroke="#f59e0b" stroke-width="1"/>
    <text x="464" y="12" fill="#a6adc8" font-size="10">sequencer</text>

    <rect x="540" y="0" width="16" height="16" rx="3"
          fill="#2dd4bf" fill-opacity="0.15" stroke="#2dd4bf" stroke-width="1"/>
    <text x="564" y="12" fill="#a6adc8" font-size="10">member</text>

    <line x1="620" y1="8" x2="660" y2="8"
          stroke="#6366f1" stroke-width="1.2" stroke-dasharray="5,3"
          marker-end="url(#arrow)"/>
    <text x="668" y="12" fill="#a6adc8" font-size="10">global seq</text>

    <path d="M 760,8 Q 775,0 790,8" fill="none"
          stroke="#f43f5e" stroke-width="1.3" stroke-dasharray="3,2"
          marker-end="url(#rotArrow)"/>
    <text x="800" y="12" fill="#a6adc8" font-size="10">key chain</text>
  </g>
</svg>
